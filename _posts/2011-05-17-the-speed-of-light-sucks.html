---
layout: post
title: The Speed of Light Sucks
date: 2011-05-17 04:48:58.000000000 -04:00
categories:
- community
- server
- stackexchange
tags: []
status: publish
type: post
published: true
meta:
  _edit_last: '1'
  _wp_old_slug: the-speed-of-light-suck
  _cws_is_markdown: '1'
  _podPressPostSpecific: a:6:{s:15:"itunes:subtitle";s:15:"##PostExcerpt##";s:14:"itunes:summary";s:15:"##PostExcerpt##";s:15:"itunes:keywords";s:17:"##WordPressCats##";s:13:"itunes:author";s:10:"##Global##";s:15:"itunes:explicit";s:7:"Default";s:12:"itunes:block";s:7:"Default";}
author:
  login: admin
  email: jatwood@codinghorror.com
  display_name: Jeff Atwood
  first_name: Jeff
  last_name: Atwood

---
<p>Our <a href="http://blog.serverfault.com/post/1432571770/">current datacenter</a> is in <strong>New York City</strong>. Yep, <a href="http://www.youtube.com/results?search_query=%22pace+picante%22+get+a+rope">where they make all that great salsa</a>. So whenever you make a request to any <a href="http://stackexchange.com/sites">Stack Exchange site</a>, the internet tubes must connect from your location to our datacenter in NYC. We are not (yet) immune to the laws of physics, so depending on the distance between you and NYC this ... can take a while.</p>
<p>As John Carmack <a href="http://www.wired.com/wired/archive/4.08/id_pr.html">once so eloquently said</a>:</p>
<blockquote><p>
  The speed of light sucks.
</p></blockquote>
<p>But there <i>is</i> a workaround of sorts. <a href="http://blog.stackoverflow.com/2009/08/a-few-speed-improvements/">As of summer 2009</a> we currently serve all our static content (that is, stuff that does not change on every request) such as JavaScript, images, CSS, etc. from <a href="http://sstatic.net">sstatic.net</a>. Since these files don't change very often, there's no reason they have to be served directly by us; we can offload our static files to a <a href="http://en.wikipedia.org/wiki/Content_delivery_network">content delivery network</a>.</p>
<p>A good CDN has a network of fast nodes all over the world.</p>
<p><img src="{{ site.baseurl }}/assets/cdn-world-map.png" alt="" title="cdn-world-map" width="552" height="278" /></p>
<p>With a CDN, when you make a request for, say, <code>favicon.ico</code> -- that particular file doesn't have to be delivered from our NYC datacenter. It can come from a server in the CDN closer to <i>you</i>. Yes, these files are usually cached, but you do have to retrieve them at least once and sometimes a few times a day. The resulting performance improvement can be quite dramatic, particularly for that first click!</p>
<p>We're currently evaluating our CDN options and we want to measure the real-world improvements of a few different CDNs.</p>
<ul>
<li><strong>sstatic</strong><br />
<a href="http://sstatic.net/js/full.js">http://sstatic.net/js/full.js</a></li>
<li><strong>NetDNA</strong><br />
<a href="http://sstatic.stackexchange.netdna-cdn.com/js/full.js">http://sstatic.stackexchange.netdna-cdn.com/js/full.js</a></li>
<li><strong>Amazon</strong><br />
<a href="http://d1d5ue6vu5b30i.cloudfront.net/js/full.js">http://d1d5ue6vu5b30i.cloudfront.net/js/full.js</a></li>
<li><strong>EdgeCast</strong><br />
<a href="http://wac.43df.edgecastcdn.net/8043DF/sstatic/js/full.js">http://wac.43df.edgecastcdn.net/8043DF/sstatic/js/full.js</a></li>
</ul>
<p>Make a few requests to each of these links, using <kbd>Ctrl</kbd>-<kbd>F5</kbd> / <kbd>Command</kbd>-<kbd>Shift</kbd>-<kbd>R</kbd> to force a redownload instead of using a cached version, and record the typical duration of a download.</p>
<p>In Chrome, you can see detailed download times via the "Network" tab of the Developer Tools, which can be invoked via <kbd>Ctrl</kbd>-<kbd>Shift</kbd>-<kbd>I</kbd>.</p>
<p><img src="{{ site.baseurl }}/assets/chrome-dev-tools-network.png" alt="" title="chrome-dev-tools-network" width="508" height="192" /></p>
<p>In Firefox with <a href="http://getfirebug.com/">Firebug</a>, download timing is on the "Network" tab, too:</p>
<p><img src="{{ site.baseurl }}/assets/firefox-firebug-network.png" alt="" title="firefox-firebug-network" width="600" height="113" /></p>
<p>The result in the Chrome screenshot is <strong>576ms</strong>; in the Firefox screenshot it's <strong>490ms</strong>.</p>
<h2>Please use <a href="https://spreadsheets.google.com/spreadsheet/viewform?formkey=dGx1RW1sNHlzMDR4UV9TODZCWk9fNFE6MQ">this Google form</a> to enter your results.</h2>
<p>With your data in hand, we hope to choose a killer CDN that makes Stack Exchange faster all over the world!</p>
<p><font color="red">update:</font> now with results! The percentages here mean <i>percent better than sstatic.net</i> which is our default CDN in NYC.<br />
<img src="{{ site.baseurl }}/assets/cdn-performance-test-world-map.png" alt="" title="cdn-performance-test-world-map" width="598" height="614" /></p>
