---
layout: post
title: Improved Question Merging
date: 2010-06-09 23:59:48.000000000 -04:00
categories:
- community
- design
tags: []
status: publish
type: post
published: true
meta:
  _edit_last: '1'
  _podPressPostSpecific: a:6:{s:15:"itunes:subtitle";s:15:"##PostExcerpt##";s:14:"itunes:summary";s:15:"##PostExcerpt##";s:15:"itunes:keywords";s:17:"##WordPressCats##";s:13:"itunes:author";s:10:"##Global##";s:15:"itunes:explicit";s:7:"Default";s:12:"itunes:block";s:7:"Default";}
author:
  login: admin
  email: jatwood@codinghorror.com
  display_name: Jeff Atwood
  first_name: Jeff
  last_name: Atwood
excerpt: !ruby/object:Hpricot::Doc
  options: {}
---
<p>
The ability to cast a question deletion vote against a closed question is earned at 10,000 reputation. It was always <i>intended</i> as a tool for getting rid of useless, bottom-of-the barrel type closed question content. But lately we've had to deal with a <a href="http://meta.stackoverflow.com/questions/50069/why-are-we-deleting-instead-of-merging">rash of question deletions</a>, some of which I felt <a href="http://meta.stackoverflow.com/questions/51097/the-great-question-deletion-audit-of-2010">destroyed useful answers</a>. To address this issue, we instituted <a href="http://meta.stackoverflow.com/questions/50523/should-delete-votes-be-limited-like-close-votes">scaled deletion votes</a>. Question deletion still requires at minimum 3 votes from 10k rep users to achieve a delete (or undelete) -- but the more votes a question and its answer have, the more delete votes required to delete it. This is really more of a safety measure than a complete solution, though.</p>
<p>
As usual, <i>I blame myself</i>*, but my original advice stands: <b>if there's anything of worth in the answers, the question should be merged with another question rather than being deleted!</b> (and if there's nothing of worth in the question or answers, pull the deletion trigger with my blessing. Heck, while you're at it, give it a double-tap to make sure it stays down.) But our old merge process was kind of, er, broken. Our old merge &hellip;</p>
<ul>
<li><i>destroyed</i> one of the questions
</li>
<li>left no trace of the old question, leaving users scratching their heads and wondering "what happened to my/this question?"
</li>
<li>left almost no visible trace of the merge in the revision history of the surviving question
</li>
</ul>
<p>
I guess <a href="http://www.youtube.com/watch?v=v46plhmxXU4">I picked the wrong day to stop sniffing glue</a> when I came up with that merge implementation.</p>
<p>
But no more! Our kinder, gentler question merge has none of these problems! It behaves much more like a typical duplicate close, with the exception that the answers are migrated to the target question.</p>
<p>
Let's try an example. These two questions are fairly similar, so I'll merge them on our development tier:</p>
<ol>
<li><a href="http://stackoverflow.com/questions/1315653/regular-expression-to-find-urls-not-inside-a-hyperlink">Regular expression to find URLs not inside a hyperlink</a>
</li>
<li><a href="http://stackoverflow.com/questions/1191637/how-to-wrap-text-in-a-hyperlink-only-if-it-isnt-already-wrapped-in-a-hyperlink">How to wrap text in a hyperlink ONLY if it isn’t already wrapped in a hyperlink</a>
</li>
</ol>
<p>
<i>disclaimer: I am not actually proposing these two particular questions get merged, I just needed a plausible looking example to illustrate this blog post!</i></p>
<p>
If you believe these should be merged, <a href="http://blog.stackoverflow.com/2009/04/raising-a-red-flag/">flag them for moderator attention</a> and indicate what you believe the merge target should be. (Yes, merging is still a moderator only function at the moment.) If the moderator agrees, the merge will happen. In this case, I felt #1 had the stronger title, so I did the merge in that direction. </p>
<p>
<a href="http://blog.stackoverflow.com/wp-content/uploads/question-merge-example.png" style="border-bottom:none;"><img src="assets/question-merge-example-small.png" alt="" title="question-merge-example-small" width="600" height="671" style="border:1px solid silver" /></a></p>
<p>
The source merge question isn't deleted, yet; once its answers have been merged into the target, it's left around as a stub for people to find -- with a little signpost directing them to the merge target:</p>
<blockquote>
<h2>merged by Jeff Atwood ♦ 8 secs ago</h2>
<p>this question was merged with <a href="http://stackoverflow.com/questions/1315653/regular-expression-to-find-urls-not-inside-a-hyperlink">Regular expression to find URLs not inside a hyperlink</a> because it is an exact duplicate of that question.</p>
</blockquote>
<p>
We also record detailed migration records in the revision history of both questions and the migrated answers, so you can always get an audit trail of what happened, and the process is theoretically reversible. (Except for comments on the source question, which are unavoidably de-parented as they are migrated to the target question.)</p>
<p>
Now, if the merge source question <i>is</i> eventually deleted, we can handle that, too -- we do <b>an automatic 301 redirect to the merge target</b>.</p>
<p>
I'm not necessarily advocating deletion, either; <a href="http://blog.stackoverflow.com/2009/04/handling-duplicate-questions/">we <i>want</i> some of these merge stub questions hanging around</a> so people can find two "identical" questions that were asked in two totally different ways. The <i>exact, perfect</i> duplicate question, in my experience, is much more rare than people think.</p>
<p>
Anyway, now that we finally have <b>a much saner question merge process</b>, I urge you 10k users to take your collective itchy fingers off those deletion triggers and consider -- <i>should this question be merged, instead?</i></p>
<p>
<sub>* somehow we forgot to limit the # of delete votes 10k users could cast every day, which was a disaster waiting to happen. Almost every other vote type is rate limited, and <a href="http://www.codinghorror.com/blog/2009/02/rate-limiting-and-velocity-checking.html">for good reason</a>.</sub></p></p></p></p></p></p></p></p></p>
