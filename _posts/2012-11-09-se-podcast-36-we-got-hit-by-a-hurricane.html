---
layout: post
title: 'SE Podcast #36 - We Got Hit by a Hurricane'
date: 2012-11-09 09:07:58.000000000 -05:00
categories:
- podcasts
tags: []
status: publish
type: post
published: true
meta:
  _edit_last: '13'
  _podPressMedia: 'a:1:{i:0;a:12:{s:3:"URI";s:121:"http://www.podtrac.com/pts/redirect.mp3/feeds.soundcloud.com/stream/66762703-stack-exchange-stack-exchange-podcast-36.mp3";s:5:"title";s:35:"SE
    Podcast #36 - Hit by a Hurricane";s:4:"type";s:9:"audio_mp3";s:4:"size";s:8:"78405248";s:8:"duration";s:7:"1:21:40";s:12:"previewImage";s:84:"http://blog.stackoverflow.com/wp-content/plugins/podpress/images/vpreview_center.png";s:10:"dimensionW";s:1:"0";s:10:"dimensionH";s:1:"0";s:3:"rss";s:2:"on";s:4:"atom";s:2:"on";s:13:"disablePlayer";s:2:"on";s:14:"disablePreview";s:2:"on";}}'
  _podPressPostSpecific: a:6:{s:15:"itunes:subtitle";s:15:"##PostExcerpt##";s:14:"itunes:summary";s:15:"##PostExcerpt##";s:15:"itunes:keywords";s:17:"##WordPressCats##";s:13:"itunes:author";s:10:"##Global##";s:15:"itunes:explicit";s:7:"Default";s:12:"itunes:block";s:7:"Default";}
author:
  login: alex
  email: alex@stackexchange.com
  display_name: Alex Miller
  first_name: Alex
  last_name: Miller

---
<p>So as you may have heard in the news, the east coast got hit pretty hard by Hurricane Sandy - in particular, our datacenter in Lower Manhattan was almost knocked entirely offline.  If not for the incredible efforts of Fog Creek Software, Squarespace, and Peer1 (the datacenter) there would have certainly been days of outages for everyone involved.</p>
<p>We've got a ton of people from Stack, Fog Creek and Squarespace on to tell the CRAZY story of exactly what happened last week! Guests include: <strong>David Fullerton</strong><strong>,</strong> VP Engineering at Stack Exchange; <strong>Geoff Dalgas &amp; Nick Craver, </strong>both core developers at Stack Exchange;<strong> Alex Miller</strong>; <strong>Michael Pryo</strong>r; <strong>Mendy Berkowitz</strong>, lead sysadmin for Fog Creek; <strong>Babak Ghaheremanpour</strong>, longtime Creeker; <strong>Anthony Casalena</strong>, CEO and founder of <a href="http://www.squarespace.com/" target="_blank">Squarespace</a>.</p>
<p>We're planning on telling the whole story of Hurricane Sandy - it's roughly in chronological order here</p>
<ul>
<li>We are from New York, and all of our offices and equipment are located there. Hurricane Sandy recently hit us, as you may have heard.</li>
<li>We go back all the way to Monday night, 10/29. Nick got the first communications from Peer1, our datacenter, which was warning everyone that the power was going out for everything south of 34th street.</li>
<li>Monday night, we thought all was safe in sound. Stack Exchange had some failover plans in place, however, as you heard about <a href="http://blog.stackoverflow.com/2012/10/se-podcast-34/" target="_blank">on a previous podcast</a>.</li>
<li>On the Fog Creek side, things were still relatively calm. They were basically blindsided, because the datacenter was confident that they had generator fuel for "like, days".</li>
<li>Then the storm hit. There was wind and a little bit of rain. Everything in Zone A got flooded basically immediately, as predicted, but if you didn't live in Zone A you didn't really notice.</li>
<li>Michael Pryor's foreshadowing. He saw a Hacker News post saying that Internap, another datacenter, was down - and started making plans to protect Fog Creek if Peer1 went down.</li>
<li>Suddenly, we get word that the generator only has thirty minutes of fuel left.</li>
<li>Mike Mazzei was the only Peer1 staffer there at the time, and he was stretched pretty thin. He is basically a super hero and ended up saving the day.</li>
<li>Anthony managed to get exactly one email on Tuesday morning, and it happened to be about running out of fuel in the middle of the day (where he had previously thought they had a few days of fuel to spare).</li>
<li>"Let me tell you what it looked like when I showed up." Michael describes the scene on Broad St. for us.</li>
<li>Based on flawed information from the NOC, Fog Creek makes plans to shut everything down at 10:45AM.</li>
<li>Bradford was the only sysadmin who was awake and connected. He said we had to start doing a controlled shutdown</li>
<li>Mike has the idea that if we can get the fuel up to the generator, we can keep everything online.</li>
<li>Someone from Squarespace found empty 55-gallon drums on Craigslist and brought them down to the datacenter. The first attempt is pushing these barrels of diesel up the stairs.</li>
<li>The building's major task was getting the water pumped out of the basement, so at first Fog Creek and Squarespace and Peer1 were able to work on the fuel issue relatively unfettered.</li>
<li>Fog Creek decides to bring their servers back up, since they had people on the ground in the datacenter now to monitor the situation</li>
<li> The bucket brigade begins!</li>
<li>Michael goes home and sleeps for three hours. He then heads back to Peer1 and checks the generator tank which is only a quarter full...</li>
<li>Joel tells us about trying to raise the alarm with incommunicado sysadmins Mendy and Sven and get them back online</li>
<li>Sven starts working on with some others was moving Trello onto AWS</li>
<li>Michael tells us about how lucky he got with the Fog Creek fishtank during last year's power outage. Another example of how we were very lucky to be accidentally prepared for this event.</li>
<li>Everyone laughs at us for having datacenters in Manhattan, but the clear benefit is that we had the physical ability to make things happen because the employees of the company are close, and downtown Manhattan is a priority to get back up and running, resources-wise.</li>
<li>Wednesday morning was the day where we had the day laborers. Michael noticed that there were people carrying fuel that he didn't recognize, and then they started carrying our fuel to our tank. Turns out they were day laborers, and they needed payin'.</li>
<li>The system was in place, and it worked - we put a ton of fuel on the roof.  At that point, we thought there would be a happy ending.</li>
<li>Enter Thursday. Anthony wakes up to find that the workers are not allowed in the building.</li>
<li>The building management and ownership just didn't understand what a datacenter does. We were "the telco guys".</li>
<li>Things go south with the building management and ownership because of a conflict with the day laborers, because the original company who hired the day laborers didn't pay them.</li>
<li>Everyone stays quiet and tries to just stay out of the way. Mike Mazzei gets the building manager to let the bucket brigade resume using only the eleven people that were already in the building - no outside help was allowed.</li>
<li>We were allowed to do this until suddenly we weren't anymore. Mike gives a "we did all we could" speech and everyone prepares to inform customers that the outage was inevitable…</li>
<li>More army stories from Joel: the biggest challenge in a crisis situation is the "Fog of War" - 5% good communication and 95% rumor flying around.</li>
<li>The building finally gets the pump going and fills the header, and then we're basically okay.</li>
<li>When Mike Mazzei got frazzled, Joel went ballistic on Peer1 corporate. We discuss how they should have handled the situation and put in more support.</li>
<li>Another army story! When it hits the fan, you find yourself doing things that have a 1% probability of success, but it's all you've got so you do it anyway.</li>
<li> STATUS QUO: Thursday night, the pump gets going. Friday and throughout the weekend, things are calm. Work continues on all the contingency plans, but the situation is more or less stabilized.</li>
<li>The overarching key is communication, not only internally within your company, but with your customers.</li>
</ul>
<p></p>
<p><iframe src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F66762703&amp;show_artwork=true" frameborder="no" scrolling="no" width="100%" height="166"></iframe><br /></p>
