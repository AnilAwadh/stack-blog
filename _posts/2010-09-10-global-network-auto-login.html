---
layout: post
title: Global Network Auto-Login
date: 2010-09-10 19:21:25.000000000 -04:00
categories:
- community
- design
- serverfault.com
- stackexchange
- superuser.com
tags: []
status: publish
type: post
published: true
meta:
  _edit_last: '1'
  _wp_old_slug: global-network-auto-login-now-available
  _podPressPostSpecific: a:6:{s:15:"itunes:subtitle";s:15:"##PostExcerpt##";s:14:"itunes:summary";s:15:"##PostExcerpt##";s:15:"itunes:keywords";s:17:"##WordPressCats##";s:13:"itunes:author";s:10:"##Global##";s:15:"itunes:explicit";s:7:"Default";s:12:"itunes:block";s:7:"Default";}
author:
  login: admin
  email: jatwood@codinghorror.com
  display_name: Jeff Atwood
  first_name: Jeff
  last_name: Atwood

---
<p>We now support automatically logging in to any site in the <a href="http://stackexchange.com/sites">Stack Exchange network</a>.</p>
<p>By that I mean, as long as ...</p>
<ol>
<li>You have recently logged in to <i>any</i> <a href="http://stackexchange.com/sites">Stack Exchange network site</a>
</li>
<li>You <b>hold an existing account</b> on the target site you're navigating to
</li>
<li>You are using the <b>same OpenID</b> credentials
</li>
</ol>
<p>... the site you're navigating to will <b>automagically log you in!</b> You'll see a notification bar at the top to let you know when you've automatically logged into a site.</p>
<p><img src="assets/global-auth-in-action.png" alt="" title="global-auth-in-action" width="600" height="349" style="border:1px solid black" /></p>
<p><small>(We just forced every registered account in the entire network to log off and log back in to ensure that everyone has logged in under this new regime -- so everyone should meet criteria #1 by definition.)</small></p>
<p>Global logins are tricky for us because we need <b>cross-domain identity</b>. That is, each of the following sites should, somehow, just magically <i>know</i> who you are:</p>
<ul>
<li>stackoverflow.com
</li>
<li>serverfault.com
</li>
<li>superuser.com
</li>
<li>stackexchange.com
</li>
</ul>
<p>(not to mention that <i>all</i> current <a href="http://stackexchange.com/sites">Stack Exchange 2.0 sites</a> will eventually have custom domain names of their own choosing.)</p>
<p>While subdomains such as <code>chat.serverfault</code> and <code>meta.serverfault</code> are easy if you store your cookies the right way, getting access to cookies at different domains is, to put it charitably, <i>a friggin' nightmare</i>. The whole third party cookie story -- that is, reading or writing cookies stored at a domain <i>other</i> than the one you're currently on -- is irreversibly screwed up, and getting <a href="http://squeeville.com/2010/02/03/third-party-cookies-in-safari-internet-explorer/">worse with every new browser release</a>, thanks mostly to unscrupulous ad networks.</p>
<p>So, we gave up on using third-party cookies. Instead, we use <a href="http://diveintohtml5.org/storage.html">HTML 5 Local Storage</a> for global authentication, at our centralized domain <a href="http://stackauth.com">stackauth.com</a>. Now, this does require a modern browser, though not unreasonably so: IE8+, Chrome, Safari, FireFox 3.6+, and Opera 10.61+ are all supported.</p>
<p>Kevin has labored mightily to get all this working, and we've been silently running beta revisions of global auth across the network for the last two or three weeks as we work out the kinks and test. We now think it's (mostly) ready for prime time.</p>
<p>As with all things technically complex, there are some caveats. Global auth should work fine in the typical case -- and even if global auth is completely down, it can <i>never</i> prevent you from logging into a site the traditional way. But please be advised that we may not be able to automatically log in you in, if ...</p>
<ul>
<li>You've been to the target site recently <i>without</i> a global auth session (click the "login" link at the top of every page to force it)
</li>
<li>You're using some sort of anonymizer that interferes with <a href="http://en.wikipedia.org/wiki/HTTP_referrer">HTTP Referrer</a>
</li>
<li>You aren't using the same OpenId across all sites
</li>
<li>You're visiting a <a href="http://blog.stackoverflow.com/2010/07/new-per-site-metas/">per-site meta</a> without first logging into the parent (child metas don't use global auth; they rely on identity coming from the parent site.)
</li>
</ul>
<p><small>(And if you're looking for excruciating technical detail on how this all works, Kevin has <a href="http://meta.stackoverflow.com/questions/64260/how-does-sos-new-auto-login-feature-work/64274#64274">documented that here on meta</a>.)</small></p>
<p>If you have issues with global auth and need to troubleshoot, I suggest starting by <b>forcing a global logout</b> -- you can do this by clicking "log out", then clicking the big "log out everywhere" button.</p>
<p><img src="assets/log-out-everywhere-button.png" alt="" title="log-out-everywhere-button" width="372" height="92" /></p>
<p>Bear in mind that you must hold accounts on the sites  -- global authentication will not automatically create accounts for you (with the lone exception of http://stackexchange.com itself). That said, as long as you're logged into one account in our network, you should now be automatically logged into <i>all</i> your accounts.</p>
